<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="314px" preserveAspectRatio="none" style="width:869px;height:314px;background:#FFFFFF;" version="1.1" viewBox="0 0 869 314" width="869px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="179.6016" style="stroke:#000000;stroke-width:1.5;" width="853.019" x="10" y="82.4297"/><rect fill="none" height="119.3359" style="stroke:#000000;stroke-width:1.5;" width="833.019" x="20" y="135.6953"/><g><title>Cron</title><rect fill="#000000" fill-opacity="0.00000" height="242.7344" width="8" x="49.4849" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="53" x2="53" y1="36.2969" y2="279.0313"/></g><g><title>parc.contrat (ORM)</title><rect fill="#000000" fill-opacity="0.00000" height="242.7344" width="8" x="284.2524" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="288.2432" x2="288.2432" y1="36.2969" y2="279.0313"/></g><g><title>parc.facture (ORM)</title><rect fill="#000000" fill-opacity="0.00000" height="242.7344" width="8" x="442.0146" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="445.2617" x2="445.2617" y1="36.2969" y2="279.0313"/></g><g><title>SMTP</title><rect fill="#000000" fill-opacity="0.00000" height="242.7344" width="8" x="551.7476" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="554.7676" x2="554.7676" y1="36.2969" y2="279.0313"/></g><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="242.7344" width="8" x="614.9927" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="618.7275" x2="618.7275" y1="36.2969" y2="279.0313"/></g><g><title>SMTP</title><rect fill="#000000" fill-opacity="0.00000" height="242.7344" width="8" x="813.0391" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="816.0591" x2="816.0591" y1="36.2969" y2="279.0313"/></g><g class="participant participant-head" data-participant="Cron"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="46.9697" x="30" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32.9697" x="37" y="24.9951">Cron</text></g><g class="participant participant-tail" data-participant="Cron"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="46.9697" x="30" y="278.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32.9697" x="37" y="298.0264">Cron</text></g><g class="participant participant-head" data-participant="Contrat"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="148.0186" x="214.2432" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134.0186" x="221.2432" y="24.9951">parc.contrat (ORM)</text></g><g class="participant participant-tail" data-participant="Contrat"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="148.0186" x="214.2432" y="278.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134.0186" x="221.2432" y="298.0264">parc.contrat (ORM)</text></g><g class="participant participant-head" data-participant="Facture"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147.5059" x="372.2617" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133.5059" x="379.2617" y="24.9951">parc.facture (ORM)</text></g><g class="participant participant-tail" data-participant="Facture"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147.5059" x="372.2617" y="278.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133.5059" x="379.2617" y="298.0264">parc.facture (ORM)</text></g><g class="participant participant-head" data-participant="Mail"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="51.96" x="529.7676" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37.96" x="536.7676" y="24.9951">SMTP</text></g><g class="participant participant-tail" data-participant="Mail"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="51.96" x="529.7676" y="278.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37.96" x="536.7676" y="298.0264">SMTP</text></g><g class="participant participant-head" data-participant="Client"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="54.5303" x="591.7275" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="598.7275" y="24.9951">Client</text></g><g class="participant participant-tail" data-participant="Client"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="54.5303" x="591.7275" y="278.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="598.7275" y="298.0264">Client</text></g><g class="participant participant-head" data-participant="SMTP"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="51.96" x="791.0591" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37.96" x="798.0591" y="24.9951">SMTP</text></g><g class="participant participant-tail" data-participant="SMTP"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="51.96" x="791.0591" y="278.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37.96" x="798.0591" y="298.0264">SMTP</text></g><g class="message" data-participant-1="Cron" data-participant-2="Contrat"><polygon fill="#181818" points="276.2524,63.4297,286.2524,67.4297,276.2524,71.4297,280.2524,67.4297" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="53.4849" x2="282.2524" y1="67.4297" y2="67.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148.4653" x="60.4849" y="62.3638">search([statut='actif'])</text></g><path d="M10,82.4297 L86.624,82.4297 L86.624,89.5625 L76.624,99.5625 L10,99.5625 L10,82.4297" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="179.6016" style="stroke:#000000;stroke-width:1.5;" width="853.019" x="10" y="82.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31.624" x="25" y="95.4966">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="136.6138" x="101.624" y="94.6401">[pour chaque contrat]</text><g class="message" data-participant-1="Contrat" data-participant-2="Cron"><polygon fill="#181818" points="64.4849,116.6953,54.4849,120.6953,64.4849,124.6953,60.4849,120.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="58.4849" x2="287.2524" y1="120.6953" y2="120.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210.7676" x="70.4849" y="115.6294">date_fin, frequence, last_invoice</text></g><path d="M20,135.6953 L84.4429,135.6953 L84.4429,142.8281 L74.4429,152.8281 L20,152.8281 L20,135.6953" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="119.3359" style="stroke:#000000;stroke-width:1.5;" width="833.019" x="20" y="135.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="35" y="148.7622">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="55.8057" x="99.4429" y="147.9058">[&#233;ligible]</text><g class="message" data-participant-1="Cron" data-participant-2="Facture"><polygon fill="#181818" points="434.0146,169.9609,444.0146,173.9609,434.0146,177.9609,438.0146,173.9609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="53.4849" x2="440.0146" y1="173.9609" y2="173.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180.4258" x="60.4849" y="168.895">create(contrat_id, montant)</text></g><g class="message" data-participant-1="Facture" data-participant-2="SMTP"><polygon fill="#181818" points="805.0391,199.0938,815.0391,203.0938,805.0391,207.0938,809.0391,203.0938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="446.0146" x2="811.0391" y1="203.0938" y2="203.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="247.1904" x="453.0146" y="198.0278">send_mail(template='facture_portail')</text></g><g class="message" data-participant-1="SMTP" data-participant-2="Client"><polygon fill="#181818" points="629.9927,228.2266,619.9927,232.2266,629.9927,236.2266,625.9927,232.2266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="623.9927" x2="816.0391" y1="232.2266" y2="232.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174.0464" x="635.9927" y="227.1606">Email + lien PDF/signature</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="20" x2="853.019" y1="241.2266" y2="241.2266"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="35.562" x="25" y="251.437">[skip]</text><!--SRC=[RL11JiCm4Bpx5QjUaeeKxf7A1UWjeW9k24N6sRGh7DlO6_x4E_WOwye1Ac79adSzCpkpGKScGq4xXfledGf_6zvnr0mwmKhwvjAKHdt_qArNPzYTDZn7_CMEfV4Fzh5xscTWfycU3xI4ZfNAJc1plHXe8Q587kldn9fdtbQYJMFribRM-m31pn7CKR_F2CMYWX_tcomaWYqCch4VoJKmHXImCzY0rObxSX-U30fBMuQlJqi7UhMvpcUnKpAsO2AAL5rczJGqCCbR8gmBPLc7i7BQdC0D_II1QyOfMA5lgxAYFlZ8ybCjvDD-iklJEbguopouW5p2_dPtbUZWTAOA0Mr2I6yKyjiDIkut]--></g></svg>